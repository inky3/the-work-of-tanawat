<!-- Toggle button -->
<button
  id="necron-toggle"
  class="necron-btn"
  aria-controls="necron-drawer"
  aria-expanded="false"
  aria-label="Open menu"
>
  <span class="bars" aria-hidden="true"></span>
</button>

<!-- Drawer + scrim -->
<div id="necron-scrim" class="necron-scrim" hidden></div>

<aside id="necron-drawer" class="necron-drawer" hidden aria-hidden="true">
  <nav class="necron-nav" aria-label="Necron quick nav">
    <a href="/" class="necron-link">Home</a>
    <a href="/the.gallery/" class="necron-link">The.Gallery</a>
    <a href="/the.gallery/about" class="necron-link">About</a>
    <hr />
    <a href="/the.gallery/gallery/poster" class="necron-link">Posters</a>
    <a href="/the.gallery/gallery/photography" class="necron-link">Photography</a>
    <a href="/the.gallery/gallery/terrarium" class="necron-link">Terrarium</a>
  </nav>
</aside>

<style>
  :root {
    --necron:#0CE586;            /* glow green */
    --panel:#0f1113;              /* drawer bg */
  }

  /* Floating, glowing button (top-right) */
  .necron-btn{
    position:fixed; top:14px; right:18px;
    z-index:1100;
    min-width:52px; height:40px; padding:0 14px;
    border:none; border-radius:12px;
    background:var(--necron);
    box-shadow:0 0 22px rgba(12,229,134,.55);
    display:grid; place-items:center;
    cursor:pointer;
    transition:transform .15s ease, box-shadow .2s ease, opacity .2s ease;
  }
  .necron-btn:hover{ transform:translateY(-1px); box-shadow:0 0 26px rgba(12,229,134,.7); }
  .necron-btn:active{ transform:translateY(0); }
  .necron-btn:focus-visible{ outline:2px solid #fff; outline-offset:3px; }

  /* Three bars icon */
  .bars, .bars::before, .bars::after{
    display:block; width:22px; height:3px; border-radius:2px; background:#fff; position:relative;
    transition:transform .2s ease, opacity .2s ease;
  }
  .bars::before, .bars::after{ content:""; position:absolute; left:0; }
  .bars::before{ top:-7px; } .bars::after{ top:7px; }

  /* Scrim */
  .necron-scrim{
    position:fixed; inset:0; z-index:1090; background:rgba(0,0,0,.36);
    opacity:0; pointer-events:none; transition:opacity .18s ease;
  }
  .necron-scrim.is-open{ opacity:1; pointer-events:auto; }

  /* Drawer */
  .necron-drawer{
    position:fixed; top:0; right:0; bottom:0; width:min(86vw, 320px);
    background:linear-gradient(180deg, #111416, #0b0e10); color:#e7ffee;
    border-left:1px solid rgba(12,229,134,.22);
    box-shadow:-12px 0 36px rgba(0,0,0,.35);
    transform:translateX(100%); opacity:.98;
    z-index:1105;
    transition:transform .22s cubic-bezier(.2,.8,.2,1);
    padding:18px 18px 28px;
  }
  .necron-drawer.is-open{ transform:translateX(0); }
  .necron-nav{ display:flex; flex-direction:column; gap:.4rem; margin-top:8px; }
  .necron-link{
    padding:.6rem .75rem; border-radius:10px; color:#d8fbe9; text-decoration:none;
    border:1px solid rgba(255,255,255,.06);
    background:rgba(255,255,255,.02);
    transition:background .15s ease, border-color .15s ease, color .15s ease;
  }
  .necron-link:hover{ background:rgba(12,229,134,.10); border-color:rgba(12,229,134,.35); color:#fff; }
  hr{ border:0; height:1px; background:rgba(255,255,255,.08); margin:.6rem 0; }
</style>

<script>
  // Minimal, framework-free controller
  (function(){
    const btn   = document.getElementById('necron-toggle');
    const drawer= document.getElementById('necron-drawer');
    const scrim = document.getElementById('necron-scrim');

    if(!btn || !drawer || !scrim) return;

    const open = () => {
      drawer.hidden = false;
      scrim.hidden  = false;
      requestAnimationFrame(() => {
        drawer.classList.add('is-open');
        scrim.classList.add('is-open');
        btn.setAttribute('aria-expanded','true');
        drawer.setAttribute('aria-hidden','false');
      });
      document.addEventListener('keydown', onEsc);
    };

    const close = () => {
      drawer.classList.remove('is-open');
      scrim.classList.remove('is-open');
      btn.setAttribute('aria-expanded','false');
      drawer.setAttribute('aria-hidden','true');
      const done = () => {
        drawer.hidden = true; scrim.hidden = true;
        drawer.removeEventListener('transitionend', done);
      };
      drawer.addEventListener('transitionend', done);
      document.removeEventListener('keydown', onEsc);
    };

    const onEsc = (e) => { if(e.key === 'Escape') close(); };

    btn.addEventListener('click', () => {
      const isOpen = drawer.classList.contains('is-open');
      isOpen ? close() : open();
    });
    scrim.addEventListener('click', close);
    // close when clicking a link inside
    drawer.addEventListener('click', (e) => {
      const a = e.target.closest('a'); if(a) close();
    });
  })();
</script>
