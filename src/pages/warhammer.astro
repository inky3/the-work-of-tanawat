---
import Layout from "../components/Layout.astro";

/** HERO COPY */
const hero = {
  title: "Warhammer Figures",
  subtitle: "Warhammer40K • Painting • Figures",
  blurb:
    "งานโมเดล Warhammer ทั้งหมดนี้ เป็นงานทำสีด้วยตัวเอง และหาเรเฟอร์เรนส์จาก Pinterest หรือจาก กลุ่ม Facebook Warhammer",
};
/** TAGS (must match figure.tag below) */
const tags = ["All", "Necron", "Space Marine", "Tyranids"];

/** Base-safe + space-encoding helper (GitHub Pages friendly) */
const base = import.meta.env.BASE_URL || "/";
const url = (p = "/") => `${base}${String(p).replace(/^\/+/, "")}`;
const encode = (p = "/") => url(p).replace(/ /g, "%20");

/** GALLERY DATA — normalize tag casing to match the chips above */
const figures = [
  // ===== Necrons =====
  { title: "Canoptek Doomstalker", img: encode("/img/Painting/Necrons/canoptek doomstalker_necrons(1).jpg"), tag: "Necron" },
  { title: "Canoptek Doomstalker", img: encode("/img/Painting/Necrons/canoptek doomstalker_necrons.jpg"), tag: "Necron" },
  { title: "Necron Warriors",      img: encode("/img/Painting/Necrons/necron warriors_necron(1).jpg"), tag: "Necron" },
  { title: "Necron Warriors",      img: encode("/img/Painting/Necrons/necron warriors_necron(2).jpg"), tag: "Necron" },
  { title: "Necron Warriors",      img: encode("/img/Painting/Necrons/necron warriors_necron(3).jpg"), tag: "Necron" },
  { title: "Necron Warriors",      img: encode("/img/Painting/Necrons/necron warriors_necron(4).jpg"), tag: "Necron" },
  { title: "Necron Warriors",      img: encode("/img/Painting/Necrons/necron warriors_necron(5).jpg"), tag: "Necron" },
  { title: "Necron Warriors",      img: encode("/img/Painting/Necrons/necron warriors_necron(6).jpg"), tag: "Necron" },
  { title: "Necron Warriors",      img: encode("/img/Painting/Necrons/necron warriors_necron.jpg"),   tag: "Necron" },
  { title: "Overlord",             img: encode("/img/Painting/Necrons/overlord_necrons.jpg"),          tag: "Necron" },
  { title: "Skorpekh Destroyer",   img: encode("/img/Painting/Necrons/skorpekh destroyer token_necrons.jpg"), tag: "Necron" },
  { title: "Skorpekh Destroyer",   img: encode("/img/Painting/Necrons/skorpekh destroyer_necrons(1).jpg"), tag: "Necron" },
  { title: "Skorpekh Destroyer",   img: encode("/img/Painting/Necrons/skorpekh destroyer_necrons.jpg"),  tag: "Necron" },

  // ===== Space Marine =====
  { title: "Infernus Squad",       img: encode("/img/Painting/Space marine/infernus squad_space marines(1).jpg"), tag: "Space Marine" },
  { title: "Infernus Squad",       img: encode("/img/Painting/Space marine/infernus squad_space marines(2).jpg"), tag: "Space Marine" },
  { title: "Infernus Squad",       img: encode("/img/Painting/Space marine/infernus squad_space marines.jpg"),     tag: "Space Marine" },
  { title: "Terminator Squad",     img: encode("/img/Painting/Space marine/terminatir squad_space marines(1).jpg"), tag: "Space Marine" },
  { title: "Terminator Squad",     img: encode("/img/Painting/Space marine/terminatir squad_space marines(2).jpg"), tag: "Space Marine" },
  { title: "Terminator Squad",     img: encode("/img/Painting/Space marine/terminatir squad_space marines(3).jpg"), tag: "Space Marine" },
  { title: "Terminator Squad",     img: encode("/img/Painting/Space marine/terminatir squad_space marines.jpg"),    tag: "Space Marine" },

  // ===== Tyranids =====
  { title: "Hive Shot",            img: encode("/img/Painting/Tyranids/41CA441B-F99E-4C48-98EA-38B5CE0D4ADF-69626-000030BFAAB9521E.jpg"), tag: "Tyranids" },
  { title: "Termagants",           img: encode("/img/Painting/Tyranids/termagants_tyranids(1).jpg"), tag: "Tyranids" },
  { title: "Termagants",           img: encode("/img/Painting/Tyranids/termagants_tyranids(2).jpg"), tag: "Tyranids" },
  { title: "Termagants",           img: encode("/img/Painting/Tyranids/termagants_tyranids(3).jpg"), tag: "Tyranids" },
  { title: "Termagants",           img: encode("/img/Painting/Tyranids/termagants_tyranids(4).jpg"), tag: "Tyranids" },
  { title: "Termagants",           img: encode("/img/Painting/Tyranids/termagants_tyranids(5).jpg"), tag: "Tyranids" },
  { title: "Termagants",           img: encode("/img/Painting/Tyranids/termagants_tyranids.jpg"),    tag: "Tyranids" },
];
---

<style>
  /* ===== HERO SECTION ===== */
  .hero-grid { display:grid; grid-template-columns: 1.1fr 1fr; gap:2rem; align-items:center; }
  @media (max-width: 992px){ .hero-grid { grid-template-columns: 1fr; } }
  .hero-art { position:relative; border-radius:16px; overflow:hidden; }
  .hero-art img { width:100%; height:100%; object-fit:cover; display:block; }

  /* Chips */
  .chip { display:inline-block; padding:.4rem .8rem; border-radius:999px;
    border:1px solid rgba(12,229,134,.30); color:var(--text); margin:.25rem .35rem .25rem 0; cursor:pointer;
    transition: background-color .18s ease, border-color .18s ease, color .18s ease, transform .18s ease;
  }
  .chip.is-active { background: rgba(12,229,134,.18); border-color: rgba(12,229,134,.55); transform: translateY(-1px); }

  /* Band (translucent section surface) */
  .band { background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)); border-radius:16px; }

  /* Cards */
  .card-necron-dark {
    background: rgba(16,18,20,.86);
    border:1px solid rgba(12,229,134,.18);
    border-radius:14px; overflow:hidden;
    transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    height: 100%;
  }
  .card-necron-dark:hover {
    transform: translateY(-3px);
    border-color: rgba(12,229,134,.38);
    box-shadow: 0 0 24px rgba(12,229,134,.18);
  }

  /* Make images FILL cards consistently */
  .media {
    width: 100%;
    aspect-ratio: 9 / 16;     /* consistent tile shape */
    object-fit: cover;       /* fill without distortion (crop edges) */
    object-position: center; /* keep subject centered */
    display: block;
    opacity:.95;
  }

  .body { padding:1rem 1.1rem 1.25rem; }
  .tag { font-size:.78rem; letter-spacing:.06em; text-transform:uppercase; color:#3dffae; }

  /* Filter animation helpers */
  .gallery-card { transition: transform .24s ease, opacity .24s ease; }
  .is-hidden { opacity:0; transform: translateX(-24px); pointer-events:none; position:absolute; }

  /* === Table Card Style (like old 3D/Poster pages) === */
  .spec {
    background: var(--bg-elev, #111); /* dark panel background */
    border: 1px solid rgba(12,229,134,.25);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(12,229,134,.12);
    padding: 1.5rem;
  }

  .spec-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.95rem;
    color: #ddd;
  }

  .spec-table th {
    color: #0CE586;
    text-transform: uppercase;
    font-weight: 600;
    border-bottom: 1px solid rgba(12,229,134,.25);
    padding: .75rem;
  }

  .spec-table td {
    padding: .6rem .75rem;
    border-bottom: 1px solid rgba(255,255,255,.08);
    vertical-align: top;
  }

  .spec-table tr:last-child td {
    border-bottom: none;
  }

  .spec-table th:first-child,
  .spec-table td:first-child {
    width: 25%;
  }

  h3.table-title {
    text-align: center;
    margin-bottom: 1rem;
    color: #0CE586;
    letter-spacing: 0.05em;
  }

</style>

<Layout title={`Tanawat // ${hero.title}`} description={hero.subtitle}>
  <!-- ===== HERO ===== -->
  <section class="panel p-4 p-lg-5 mb-5">
    <div class="hero-grid">
      <div class="hero-art">
        <img src={encode("/img/Painting/profile warhammer.jpg")} alt="Warhammer hero placeholder" loading="lazy" />
      </div>
      <div>
        <h2 class="text-muted m-0">{hero.subtitle}</h2>
        <h1 class="necron-glow m-0">{hero.title}</h1>
        <p class="mt-3 mb-4">{hero.blurb}</p>

        <!-- Filter Chips -->
        <div id="warhammerFilter" aria-label="Tags">
          {tags.map((t, i) => (
            <button class={`chip ${i === 0 ? "is-active" : ""}`} data-filter={t}>{t}</button>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- ===== FIGURE GALLERY ===== -->
  <section class="band panel p-4 p-lg-5 mb-5">
    <div class="row g-3 g-lg-4" id="figureGrid">
      {figures.map((f) => (
        <div class="col-12 col-md-6 col-lg-4 gallery-card" data-tag={f.tag}>
          <div class="card-necron-dark">
            <img class="media" src={f.img} alt={f.title} loading="lazy" decoding="async" />
            <div class="body">
              <h5 class="mb-1">{f.title}</h5>
              <div class="tag mb-2">{f.tag}</div>
              <!-- optional caption -->
            </div>
          </div>
        </div>
      ))}
    </div>
  </section>

  <!-- ===== PAINTING RECIPE TABLE (OPTIONAL) ===== -->
  <!-- ===== PAINTING RECIPE TABLE (OPTIONAL) ===== -->
  <section class="panel p-4 p-lg-5 mb-5">
    <h3 class="mb-3">Painting Workflow</h3>
    <div class="band p-3" style="border-radius:12px;">
      <div class="table-responsive">
        <table class="spec-table">
          <thead>
            <tr>
              <th>Stage</th>
              <th>How to</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>หาเรเฟอร์เรนส์</td>
              <td>หาเรเฟอร์เรนส์ จาก Pinterest หรือจาก กลุ่ม Facebook Warhammer</td>
              <td>หากเรเฟอร์เรนส์มีโทนมืดก็จะใช้สีดำ หากโทรสว่างจะใช้สีขาว</td>
            </tr>
            <tr>
              <td>ตัดโมเดลออกจากแผง</td>
              <td>แยกส่วนต่างๆออกจากกัน เพื่อง่ายต่อการลงสี</td>
              <td>ตัดโมเดลออกมาทีละตัว และจัดให้เป็นระเบียบ</td>
            </tr>
            <tr>
              <td>ลงสี</td>
              <td>ลงสีตามเรเฟอร์เรนส์ที่หามา</td>
              <td>เริ่มจากตัว ไปขา และ หัวสุดท้าย</td>
            </tr>
            <tr>
              <td>ประกอบ</td>
              <td>นำโมเดลต่างๆมาประกอบ และ เคลือบสี</td>
              <td>ประกอบและเคลือบไปทีละตัว เพื่อความสวยงามของงาน</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>


  <!-- ===== CTA ===== -->
  <section class="panel p-4 p-lg-5">
    <div class="band p-4" style="border-radius:12px;">
      <h3 class="mb-2">Showcase Request</h3>
      <p class="text-muted mb-3">ถ้าต้องการดูงาน หรือคุยเรื่องการลงสี Warhammer ติดต่อมาได้เลย</p>
      <div class="d-flex flex-wrap gap-2 align-items-center">
        <a class="btn btn-necron" href="mailto:tanawat13870@gmail.com">Contact for Collaboration</a>
        <a class="btn btn-outline-light" style="border-color: rgba(12,229,134,.35)" href="/the-work-of-tanawat/3d">View 3D Works</a>
      </div>
    </div>
  </section>

  <!-- Filter logic (tiny + guarded) -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const chips = document.querySelectorAll("#warhammerFilter .chip");
      const cards = document.querySelectorAll("#figureGrid .gallery-card");
      if (!chips.length || !cards.length) return;

      const applyFilter = (filter) => {
        cards.forEach(card => {
          const tag = card.getAttribute("data-tag");
          const show = filter === "All" || tag === filter;
          card.classList.toggle("is-hidden", !show);
        });
      };

      chips.forEach(chip => {
        chip.addEventListener("click", () => {
          chips.forEach(c => c.classList.remove("is-active"));
          chip.classList.add("is-active");
          applyFilter(chip.getAttribute("data-filter"));
        });
      });

      // default = All
      applyFilter("All");
    });
  </script>
</Layout>
